<!-- Gareth Duffy g00364693, Data Representation, Lab 4: JSON and AJAX (with jQuery) Q 7 extra -->
<!-- // Reads JSON from a website: https://api.coindesk.com/v1/bpi/currentprice.json -->

<!DOCTYPE html> 
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <title>lab05: Read a simple JSON</title>
    </head>
    <body>
        <button onclick ="readJSON()">GO!!</button>
        <div id = "output"></div> <!-- where our EUR.rate output will go -->
    </body>
        <script>   
            function readJSON(){ // Call the AJAX
                $.ajax({ // Input parameters:
                    "url":"https://min-api.cryptocompare.com/data/price?fsym=ETH&tsyms=BTC,USD,EUR",
                    "method": "Get", 
                    "data":"",
                    "dataType":"JSON",
                    "success":function(result){
                        console.log(result);
                        var rate = result.USD; // Can change EUR to USD etc
                        console.log(rate); // to find EUR.rate in JSON text
                        document.getElementById("output").innerText = rate;
                    //    console.log(JSON.stringify(result)); // Prints full JSON text
                    },
                    "error":function(xhr, status,error){
                        console.log("status" + status + "message" + error);
                    }

                });
            
            }
        </script>
</html>